<!DOCTYPE html>
<html lang="fr">

<head>
  <meta charset="UTF-8">
  <title>Grappe</title>
  <link href='./css/flex.css' rel='stylesheet' type='text/css'>
  <link href='./css/main.css' rel='stylesheet' type='text/css'>
  <link href="./image/grappe-log-01.png" rel="icon" type="image/png">
  <link href='./js/jsonEditor/dist/jsoneditor.min.css' rel='stylesheet' type='text/css'>
  <script src="https://cdn.jsdelivr.net/npm/riot@3.7.0/riot+compiler.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/riot-route@3.1.2/dist/route+tag.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.0.0/jquery.min.js"></script>
  <script src="./js/RiotControl/riotcontrol.js"></script>
  <script src="./store/userStore.js"></script>
  <script src="./store/utilStoreUser.js"></script>
  <script type="riot/tag" src="tag/login.tag"></script>

</head>

<body>
  <login></login>


  <style>
    body {
      font-family: 'Open Sans', sans-serif;
      display: flex;
      flex-direction: column;
    }
  </style>

  <script>
    const utilStore = new UtilStore();
    const userStore = new UserStore(utilStore); // Create a store instance.
    RiotControl.addStore(utilStore);
    RiotControl.addStore(userStore); // Register the store in central dispatch.
    console.log("in login page", localStorage)
    if (localStorage.token != null) {
      window.open("../ihm/application.html#myWorkspaces", "_self");
    }
    RiotControl.on('application_redirect', function () {
      window.open("../ihm/application.html#myWorkspaces", "_self");
    })
    riot.compile(function () {
      var tags = riot.mount('*');
    });
  </script>

</body>

</html>